<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>interaction Documentation</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
  </style>
  <link rel="stylesheet" href="style.css" />
  <script
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js"
  type="text/javascript"></script>
</head>
<body>
<h1 id="interaction"><code>interaction</code></h1>
<h2 id="description">Description</h2>
<p>The <code>interaction</code> class applies the
<code>multipoles</code> to model the interaction between an incident
electromagnetic beam and a spherical scatterer using Mie theory defined
in the <code>glmt</code> class. It supports incident beams of types:
plane wave or focused. This class computes the resulting electric field
contributions using the multipolar expansions and evaluates scattering,
internal, and extinction cross-sections.<br />
It uses the <code>domain_class</code> from the beam objects to enable
spatial evaluation and visualization.</p>
<h2 id="initialization">Initialization</h2>
<pre><code>interaction(beam, domain, nr, radius, mu=1, mu1=1, interaction=&quot;both&quot;)</code></pre>
<div class="description">
<p><code>beam_class</code> instance. Defines the incident beam and
provides parameters like <code>wl</code>, <code>maxJ</code>,
<code>mz_star</code>, and <code>polarization</code>.</p>
<p><code>domain_class</code> instance. Provides the 3D spatial grid and
coordinate system for field evaluation.</p>
<p>float or array. Refractive index of the spherical scatterer relative
to the surrounding medium.</p>
<p>float or array. Radius of the scatterer in microns.</p>
<p>float. Relative magnetic permeability of the scatterer (default:
1).</p>
<p>float. Relative magnetic permeability of the surrounding medium
(default: 1).</p>
<p>str. Specifies which fields to compute. Options:
<code>"scattering"</code>, <code>"internal"</code>, or
<code>"both"</code> (default).</p>
</div>
<h2 id="methods">Methods</h2>
<div class="description">
<p><br />
Returns <code>True</code> if both inputs are equal scalars or equal
arrays, and <code>False</code> otherwise.</p>
<p><br />
Computes the total multipolar field <span
class="math inline">\(\mathbf{A}\)</span> as a sum over angular momentum
indices: <span class="math display">\[\mathbf{A} =
\sum_{j=j_0}^{\texttt{maxJ}} i^j \sqrt{2j+1} \cdot C_j \left[ a_j
\mathbf{A}_{j,m}^{(e)} + b_j \mathbf{A}_{j,m}^{(m)} \right] \cdot
\texttt{SCA} + \left[ c_j \mathbf{A}_{j,m}^{(m)} + d_j
\mathbf{A}_{j,m}^{(e)} \right] \cdot \texttt{ABS}.\]</span> If
<code>includeBeam=True</code>, also computes the beam field without
interaction.</p>
<p><br />
Computes cross-sections: <span class="math display">\[\begin{aligned}
    C_{\text{sca}} &amp;= \frac{2\pi}{k^2} \sum_j (2j+1) |C_{j m p}|^2
\left( |a_j|^2 + |b_j|^2 \right) \\
    C_{\text{ext}} &amp;= \frac{2\pi}{k^2} \sum_j (2j+1) |C_{j m p}|^2
\Re(a_j + b_j) \\
    C_{\text{int}} &amp;=  C_{\text{ext}}- C_{\text{sca}}
  
\end{aligned}\]</span></p>
<div class="description">
<p><code>"scattering"</code>, <code>"internal"</code>, or
<code>"extinction"</code>.</p>
<p>0, 1, or 2. Specifies dimension of output.</p>
<p>if <code>True</code>, returns electric/magnetic contributions
separately.</p>
<p>if <code>True</code>, generates a plot.</p>
<p>optional overrides: <code>x</code>, <code>radius</code>,
<code>nr</code>, <code>wavelength</code>.</p>
</div>
<p><br />
Visualizes the computed field intensity <span
class="math inline">\(|\mathbf{A}|^2\)</span>. Can show circular
polarization components (<span class="math inline">\(\xi_{\pm1},
\xi_0\)</span>) or total intensity.</p>
<div class="description">
<p>optional float. Overrides stored radius.</p>
<p>optional float. Overrides stored refractive index.</p>
<p><code>"components"</code> or <code>"total"</code>.</p>
<p>if <code>True</code>, normalize all subplots to global max.</p>
<p>Bool: If True, adds the electric field of the <code>beam</code> after
the multipolar sum is computed and visualizes the total intensity.</p>
</div>
<p><br />
Prints input beam and particle parameters when they are scalars, for
debugging and verification.</p>
</div>
</body>
</html>
